
Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	Движения.ДС_КурсовыеРазницы.Записывать = Истина;
	Для каждого Стр Из КурсовыеРазницыИНераспределеннаяПрибыль Цикл
		Движение 				= Движения.ДС_КурсовыеРазницы.Добавить();
		ЗаполнитьЗначенияСвойств(Движение, Стр);
		Движение.ПериодЧислом	= Стр.Период;
		Движение.Организация	= Организация;
		Движение.LeasePaymentActual = - Стр.LeasePaymentActual;
		Движение.LeasePaymentActualRUB = - Стр.LeasePaymentActualRUB;
		Движение.LeasePaymentProvided = - Стр.LeasePaymentProvided;
		Движение.LeasePaymentProvidedRUB = - Стр.LeasePaymentProvidedRUB;
	КонецЦикла;	
	
	// is ЯннуровВФ нач 20140919
	Если Не ис_ВводНачальныхОстатков Тогда 
	// is ЯннуровВФ кон 20140919
		// is ЯннуровВФ нач 20140623 
		Движения.Международный.Записывать = Истина;
		Для Каждого лСтрока Из КурсовыеРазницыИНераспределеннаяПрибыль Цикл 
			Если лСтрока.ContingentRent = 0 И лСтрока.ContingentRentRUB = 0 И лСтрока.FinanceCostActual = 0 И лСтрока.FinanceCostActualRUB = 0 Тогда 
				Продолжить;
			КонецЕсли;
			//Если лСтрока.ContingentRent < 0 Тогда
			Если лСтрока.ContingentRent <> 0 Или лСтрока.ContingentRentRUB <> 0 Тогда
				лПроводка = Движения.Международный.Добавить();
				лПроводка.Период = Дата;
				лПроводка.Организация = Организация;
				лПроводка.СчетДт = лСтрока.ис_СчетРасчетов;
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетДт, лПроводка.СубконтоДт, 1, лСтрока.Договор.Владелец);
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетДт, лПроводка.СубконтоДт, 2, лСтрока.Договор);
				лПроводка.Сумма = -лСтрока.ContingentRentRUB;
				Если лПроводка.СчетДт.Валютный Тогда 
					лПроводка.ВалютаДт = лСтрока.Договор.ВалютаВзаиморасчетов;
					лПроводка.ВалютнаяСуммаДт = -лСтрока.ContingentRent;
				КонецЕсли;
				лПроводка.СчетКт = ПланыСчетов.Международный.ПрочиеВнереализационныеДоходы;
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетКт, лПроводка.СубконтоКт, 1, ис_СтатьяПрочихДоходовИРасходов);
			КонецЕсли;
			//Иначе
			Если лСтрока.FinanceCostActual <> 0 Или лСтрока.FinanceCostActualRUB <> 0 Тогда
				лПроводка = Движения.Международный.Добавить();
				лПроводка.Период = Дата;
				лПроводка.Организация = Организация;
				лПроводка.СчетДт = ПланыСчетов.Международный.ПрочиеВнереализационныеРасходы;
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетДт, лПроводка.СубконтоДт, 1, СтатьяФинансовыхРасходов);
				лПроводка.СчетКт = лСтрока.ис_СчетРасчетов;
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетКт, лПроводка.СубконтоКт, 1, лСтрока.Договор.Владелец);
				БухгалтерскийУчет.УстановитьСубконто(лПроводка.СчетКт, лПроводка.СубконтоКт, 2, лСтрока.Договор);
				//лПроводка.Сумма = лСтрока.ContingentRentRUB;
				лПроводка.Сумма = лСтрока.FinanceCostActualRUB;
				Если лПроводка.СчетКт.Валютный Тогда 
					лПроводка.ВалютаКт = лСтрока.Договор.ВалютаВзаиморасчетов;
					//лПроводка.ВалютнаяСуммаКт = лСтрока.ContingentRent;
					лПроводка.ВалютнаяСуммаКт = лСтрока.FinanceCostActual;
				КонецЕсли;
			КонецЕсли;
			лПроводка.Содержание = "Фактический платеж лизинга";
		КонецЦикла;
		// is ЯннуровВФ кон 20140623 
	КонецЕсли;
	
КонецПроцедуры
