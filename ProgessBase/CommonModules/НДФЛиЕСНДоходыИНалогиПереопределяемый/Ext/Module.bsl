////////////////////////////////////////////////////////////////////////////////
// Вспомогательные процедуры, функции

////////////////////////////////////////////////////////////////////////////////
// Процедуры, функции объекта

// Формирует запрос по табличным частям документам
//
// Параметры: 
//  Режим        - режим проведения.
//
// Возвращаемое значение:
//  Результат запроса.
//
Функция СформироватьЗапросПоТабличнымЧастям(Режим, ЭтотОбъект) Экспорт

	Запрос = Новый Запрос;

	// Установим параметры запроса
	Запрос.УстановитьПараметр("ДокументСсылка" , ЭтотОбъект.Ссылка);
	Запрос.УстановитьПараметр("СтавкаНалогообложения13" , Перечисления.НДФЛСтавкиНалогообложенияРезидента.Ставка13);

	Запрос.Текст = 
	"ВЫБРАТЬ
	|	""НДФЛСведенияОДоходах"" КАК ВидСтрокиЗапроса,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.НомерСтроки,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.ФизЛицо,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.МесяцНалоговогоПериода,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.ДатаДохода КАК ДатаПолученияДохода,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.ПериодРегистрации,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КодДохода,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.СуммаДохода,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КодВычета,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.СуммаВычета,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.СуммаНалогаИсчисленная КАК СуммаНалога,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КодДохода.СтавкаНалогообложенияРезидента КАК СтавкаНалогообложенияРезидента,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КПП КАК КПП,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КодПоОКАТО КАК КодПоОКАТО,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КодПоОКТМО,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.КоличествоДетей,
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.ВключатьВДекларациюПоНалогуНаПрибыль,
	|	NULL КАК СуммаВыплаченногоДохода,
	|	NULL КАК СрокПеречисления,
	|	NULL КАК ОблагаетсяЕНВД,
	|	NULL КАК ФедеральныйБюджет,
	|	NULL КАК ФСС,
	|	NULL КАК ФФОМС,
	|	NULL КАК ТФОМС,
	|	NULL КАК ПФРНакопительная,
	|	NULL КАК ПФРСтраховая,
	|	NULL КАК ПФРНакопительнаяЕНВД,
	|	NULL КАК ПФРСтраховаяЕНВД,
	|	NULL КАК ПримененнаяЛьготаФБ,
	|	NULL КАК ПримененнаяЛьготаФСС,
	|	NULL КАК ПримененнаяЛьготаФОМС,
			///////////////////////////////////////////////////////////////{ООО "Автоматизация-Л" ДОРАБОТКА
	// Измайлова Полина 30.09.2011 15:29 
	|	NULL КАК ПодразделениеОрганизации,
	////////////////////////////////////////////////////////////////ООО "Автоматизация-Л" ДОРАБОТКА} 
	|	NULL КАК ОшибкаУказанияКодаДохода
	|ИЗ
	|	Документ.НДФЛиЕСНДоходыИНалоги.НДФЛСведенияОДоходах КАК НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах
	|ГДЕ
	|	НДФЛиЕСНДоходыИНалогиНДФЛСведенияОДоходах.Ссылка = &ДокументСсылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	""НДФЛИсчисленный13"",
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.НомерСтроки,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.ФизЛицо,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.МесяцНалоговогоПериода,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.ПериодРегистрации,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.Налог,
	|	&СтавкаНалогообложения13,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.КПП,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.КодПоОКАТО,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.КодПоОКТМО,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.ВключатьВДекларациюПоНалогуНаПрибыль,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
			///////////////////////////////////////////////////////////////{ООО "Автоматизация-Л" ДОРАБОТКА
	// Измайлова Полина 30.09.2011 15:29 
	|	NULL КАК ПодразделениеОрганизации,
	////////////////////////////////////////////////////////////////ООО "Автоматизация-Л" ДОРАБОТКА} 
	|	NULL
	|ИЗ
	|	Документ.НДФЛиЕСНДоходыИНалоги.НДФЛИсчисленный13 КАК НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13
	|ГДЕ
	|	НДФЛиЕСНДоходыИНалогиНДФЛИсчисленный13.Ссылка = &ДокументСсылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	""НДФЛУдержанный"",
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.НомерСтроки,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.ФизЛицо,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.МесяцНалоговогоПериода,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.ПериодРегистрации,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.КодДохода,
	|	NULL,
	|	NULL,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.Налог,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.СтавкаНалогообложения,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.КПП,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.КодПоОКАТО,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.КодПоОКТМО,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.ВключатьВДекларациюПоНалогуНаПрибыль,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.СуммаВыплаченногоДохода,
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.СрокПеречисления,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
			///////////////////////////////////////////////////////////////{ООО "Автоматизация-Л" ДОРАБОТКА
	// Измайлова Полина 30.09.2011 15:30 
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.ПодразделениеОрганизации,
	////////////////////////////////////////////////////////////////ООО "Автоматизация-Л" ДОРАБОТКА}
	|	ВЫБОР
	|		КОГДА НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.КодДохода.СтавкаНалогообложенияРезидента <> НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.СтавкаНалогообложения
	|			ТОГДА ИСТИНА
	|		ИНАЧЕ ЛОЖЬ
	|	КОНЕЦ
	|ИЗ
	|	Документ.НДФЛиЕСНДоходыИНалоги.НДФЛУдержанный КАК НДФЛиЕСНДоходыИНалогиНДФЛУдержанный
	|ГДЕ
	|	НДФЛиЕСНДоходыИНалогиНДФЛУдержанный.Ссылка = &ДокументСсылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	""ЕСНСведенияОДоходах"",
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.НомерСтроки,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.ФизЛицо,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.МесяцНалоговогоПериода,
	|	NULL,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.КодДоходаЕСН,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.СуммаДохода,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.Скидка,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.ОблагаетсяЕНВД,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
			///////////////////////////////////////////////////////////////{ООО "Автоматизация-Л" ДОРАБОТКА
	// Измайлова Полина 30.09.2011 15:29 
	|	NULL,
	////////////////////////////////////////////////////////////////ООО "Автоматизация-Л" ДОРАБОТКА}
	|	NULL
	|ИЗ
	|	Документ.НДФЛиЕСНДоходыИНалоги.ЕСНСведенияОДоходах КАК НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах
	|ГДЕ
	|	НДФЛиЕСНДоходыИНалогиЕСНСведенияОДоходах.Ссылка = &ДокументСсылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	""ЕСННалоги"",
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.НомерСтроки,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ФизЛицо,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.МесяцНалоговогоПериода,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ФедеральныйБюджет,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ФСС,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ФФОМС,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ТФОМС,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПФРНакопительная,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПФРСтраховая,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПФРНакопительнаяЕНВД,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПФРСтраховаяЕНВД,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПримененнаяЛьготаФБ,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПримененнаяЛьготаФСС,
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.ПримененнаяЛьготаФОМС,
		///////////////////////////////////////////////////////////////{ООО "Автоматизация-Л" ДОРАБОТКА
	// Измайлова Полина 30.09.2011 15:29 
	|	NULL,
	////////////////////////////////////////////////////////////////ООО "Автоматизация-Л" ДОРАБОТКА}
	|	NULL
	|ИЗ
	|	Документ.НДФЛиЕСНДоходыИНалоги.ЕСННалоги КАК НДФЛиЕСНДоходыИНалогиЕСННалоги
	|ГДЕ
	|	НДФЛиЕСНДоходыИНалогиЕСННалоги.Ссылка = &ДокументСсылка";

	Возврат Запрос.Выполнить();

КонецФункции // СформироватьЗапросПоШапке()

Функция ВидДоходаПоСтраховымВзносамПоУмолчанию(ВидДоговораСотрудника, Сотрудник) Экспорт

	Возврат Справочники.ДоходыПоСтраховымВзносам.ОблагаетсяЦеликом
	
КонецФункции // ПолучитьКодДоходаПоУмолчаниюПоВидуСотрудника()

////////////////////////////////////////////////////////////////////////////////
// Процедуры, функции для работы формы документа

#Если ТолстыйКлиентОбычноеПриложение Тогда

Процедура ДополнитьСписокКодовЕСН(мСписокКодовЕСН) Экспорт
	
    // В этой конфигурации дополнительных действий не предусмотрено
	
КонецПроцедуры

Процедура ДополнитьСоставКолонок(ЭтаФорма) Экспорт
	
    // В этой конфигурации дополнительных действий не предусмотрено
	
КонецПроцедуры

#КонецЕсли