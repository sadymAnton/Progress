

Процедура ВыполнитьДействияПередЗаписью(Замещение, Отказ, КоличествоЗаписей, Отбор) Экспорт
	           	
	Если Замещение и Не Отказ И КоличествоЗаписей > 0 Тогда
		// запишем перерасчеты по тем записям, которые сейчас будут замещены
		ПолныеПраваДополнительный.ЗаписьПерерасчетовДляНадбавокПоШтатномуРасписанию(СформироватьСоответствиеПоОтбору(Отбор));
	КонецЕсли;
	
КонецПроцедуры // ВыполнитьДействияПередЗаписью()




Процедура ВыполнитьДействияПриЗаписи(ОбменДанными, Отбор) Экспорт
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	// запишем перерасчеты по новым записям
	ПолныеПраваДополнительный.ЗаписьПерерасчетовДляНадбавокПоШтатномуРасписанию(СформироватьСоответствиеПоОтбору(Отбор));

	
КонецПроцедуры // ВыполнитьДействияПриЗаписи()

Функция СформироватьСоответствиеПоОтбору(Отбор)
	
	СоответствиеОтбора = Новый Соответствие;
	Для Каждого ЭлементОтбора Из Отбор Цикл
		Если ЭлементОтбора.Использование Тогда
			СоответствиеОтбора.Вставить(ЭлементОтбора.Имя, ЭлементОтбора.Значение);
		КонецЕсли;
		
	КонецЦикла;
	Возврат СоответствиеОтбора;
КонецФункции // СформироватьСоответствиеПоОтбору()