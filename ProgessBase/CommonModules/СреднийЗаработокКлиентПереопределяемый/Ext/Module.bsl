////////////////////////////////////////////////////////////////////////////////
// Вспомогательные процедуры, функции

////////////////////////////////////////////////////////////////////////////////
// Процедуры, функции для работы форм

// Формирует понятное пользователю описание
//
// Параметры
//  Ссылка - вид расчета
//
// Возвращаемое значение:
//   Строка
//
Функция ОписаниеСоставляющейСреднегоЗаработка(Ссылка) Экспорт 

	ИспользованиеЗаработкаТекст = "";
	Если Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособийС2010
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособийС2010 Тогда
		ИспользованиеЗаработкаТекст = "Для расчета пособий по социальному страхованию (по больничным листам и по уходу за ребенком)";
	ИначеЕсли Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособий
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособий Тогда
		ИспользованиеЗаработкаТекст = "Для расчета пособий по социальному страхованию до 2010 года";
	ИначеЕсли Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуНеИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиямИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиямНеИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямНеИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииНеИндексируемые
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииНеИндексируемые Тогда	
		ИспользованиеЗаработкаТекст = "Для расчета оплаты отпусков, командировок и сохраняемого в других случаях среднего заработка";
	ИначеЕсли Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуБЛ
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиямБЛ
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямБЛ
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииБЛ
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииБЛ Тогда
		ИспользованиеЗаработкаТекст = "Для пособий по нетрудоспособности до 2007 года";	
	ИначеЕсли Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоЗаработку
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоПремиям
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиям
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремии
		ИЛИ Ссылка = ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремии Тогда
		ИспользованиеЗаработкаТекст = "Для расчета отпусков и сохраняемого в других случаях среднего заработка до 2008 года";	
	КонецЕсли;
	
    Возврат ИспользованиеЗаработкаТекст
	
КонецФункции // ОписаниеСоставляющейСреднегоЗаработка()

// Формирует массив в.р., чья расчетная база может включать как основные, так и дополнительные начисления
//
// Параметры
//  нет
//
// Возвращаемое значение:
//   массив
//
Функция СоставляющиеСреднегоИзОбоихПВР() Экспорт

	МассивВР = Новый Массив;
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработку);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуБЛ);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособий);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособийС2010);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуИндексируемые);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуНеИндексируемые);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииНеИндексируемые);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремии);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииБЛ);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииИндексируемые);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииНеИндексируемые);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремии);
	МассивВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииБЛ);

	Возврат МассивВР
	
КонецФункции // МассивПремийКромеГодовых()

// Формирует дерево значений, в котором все в.р. сгруппированы для показа пользователю
//
// Параметры
//  нет
//
// Возвращаемое значение:
//   Дерево значений
//
Процедура УстановитьПараметрыЗапроса(Запрос) Экспорт

	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособийС2010);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособийС2010);
	Запрос.УстановитьПараметр("Список",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособий);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособий);
	Запрос.УстановитьПараметр("СписокДо2010",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииНеИндексируемые);
	Запрос.УстановитьПараметр("Отпуска",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииБЛ);	
	Запрос.УстановитьПараметр("СписокСтарый",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработку);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиям);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиям);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремии);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремии);	
	Запрос.УстановитьПараметр("ОтпускаСтарый",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработку);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособий);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоЗаработкуПособийС2010);
	Запрос.УстановитьПараметр("Заработок",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособий);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямПособийС2010);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиям);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиям);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямБЛ);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоПремиямНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксПремиямНеИндексируемые);
	Запрос.УстановитьПараметр("Премии",СписокПВР);
	
	СписокПВР = Новый Массив;
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремии);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремии);	
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоГодовойПремииНеИндексируемые);
	СписокПВР.Добавить(ПланыВидовРасчета.СреднийЗаработок.ПоФиксГодовойПремииНеИндексируемые);
	Запрос.УстановитьПараметр("ГодовыеПремии",СписокПВР);

	СписокПВР = Новый Массив;
	Запрос.УстановитьПараметр("ПособияНеФСС",СписокПВР);
	
КонецПроцедуры // УстановитьПараметрыЗапроса()

// Возвращает строку для заголовка строки дерева по пособиям не ФСС (за счет бюджета)
//
// Возвращаемое значение:
//   Строка
//
Функция ПолучитьЗаголовокПособияНеФСС() Экспорт

	Возврат "Для пособий не ФСС";

КонецФункции // ПолучитьЗаголовокПособияНеФСС()

// Формирует массив не редактируемых в.р. 
//
// Возвращаемое значение:
//   Массив
//
Функция ПолучитьМассивНеРедактируемыхЗаработков() Экспорт

	МассивНеРедактируемыхЗаработков = Новый Массив;
	
	МассивНеРедактируемыхЗаработков.Добавить(ОбщегоНазначенияЗК.ОсобыйЭлемент(ПланыВидовРасчета.СреднийЗаработок, "ПоЗаработкуПособийС2011"));
	
	Возврат МассивНеРедактируемыхЗаработков;

КонецФункции // ПолучитьМассивНеРедактируемыхЗаработков()


