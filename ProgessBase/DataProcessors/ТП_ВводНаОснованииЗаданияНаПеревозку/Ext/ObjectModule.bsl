Процедура ВвестиЗаданиеНаПеревозку() Экспорт
//уточнить во всех ли случаях будут вводить задание на перевозку
	//Если Не АП_ОбщегоНазначенияКлиент.ТребуетсяЗаданиеНаПеревозку(Заказ) Тогда	
	//	ОбщегоНазначения.СообщитьОбОшибке("По " + СокрЛП(Заказ) + " не вводится задание на перевозку!");
	//	Возврат;
	//КонецЕсли;
	
	Если Не СсылкаНаОбъект.Проведен Тогда
		
		ОбщегоНазначения.СообщитьОбОшибке("Ввести задание на перевозку можно только после проведения документа!");
		
		Возврат;
	КонецЕсли;
	
	Режим = РежимДиалогаВопрос.ДаНет;
	Ответ = Вопрос("Создать задания на перевозку?", Режим, 0);
	
	Если Ответ =КодВозвратаДиалога.Да Тогда
		Для Каждого стр из ТаблицаПеревозок Цикл
			Если Стр.ФлагФормирования = Истина Тогда
				Если ЗначениеЗаполнено(стр.ЗаданиеНаПеревозку) Тогда
					Сообщить("По строке "+стр.НомерСтроки+" уже введеоно задание на перевозку "+стр.ЗаданиеНаПеревозку);
				Иначе
					// тут создаем документ.
 					ЗаданиеНаПеревозку = Документы.ПТЛ_ЗаданиеНаПеревозку.СоздатьДокумент();
					ЗаданиеНаПеревозку.ДатаДоставкиПлан = стр.ДатаПоставки;
					ЗаданиеНаПеревозку.ДатаОтгрузкиПлан = стр.ДатаОтгрузки;
					ЗаданиеНаПеревозку.Заполнить(СсылкаНаОбъект);
					ЗаданиеНаПеревозку.ПолучитьФорму(,СсылкаНаОбъект).Открыть();
				КонецЕсли;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;   
		
КонецПроцедуры
